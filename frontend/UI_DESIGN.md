# 前端 UI 设计规范（仅 UI）

本文件仅描述界面外观与交互，不涉及任何数据流、状态管理或接口逻辑。实现所用技术栈不限（React/Vue/…），但需遵循本规范的视觉与交互表现。

版本：v0.1（Draft）

## 范围与目标
- 易读：层级分明、对比度充足、行高舒适，长文本可读。
- 克制：有限主色与强调色、充足留白，避免视觉噪音。
- 一致：按钮/输入/弹窗的状态与动效统一，减少学习成本。
- 可达：键盘可用、焦点可见、ARIA 合理，满足基本无障碍需求。

## 页面清单（IA）
- Chat（主聊天）- 支持多个社会学大师对话，页面切换后对话保留
- Feedback（评分与评语弹窗）
- Stats（反馈与使用统计）
- Settings（主题偏好）
- About（关于与帮助）

## 设计令牌（Design Tokens）
- 颜色（Light）
  - Primary：500 #3B82F6，600 #2563EB，50 #EFF6FF（浅底）
  - Text：Title #111827，Body #374151，Secondary #6B7280
  - Surface：Bg #FFFFFF，Bg-Alt #F9FAFB，Card #FFFFFF
  - Divider/Border：#E5E7EB
  - Semantic：Success #10B981，Warning #F59E0B，Error #EF4444
- 颜色（Dark）
  - 保持 Primary，不改变可识别性；
  - Surface：Bg #0B1020，Card #0F172A；
  - Text：Title #F8FAFC，Body #E5E7EB；Divider #1F2937
- 字体与字号（系统字体优先）
  - 标题：H1 24/32，H2 20/28，H3 18/26
  - 正文：Base 16/24，Small 14/22，Caption 12/18（单位 px）
- 间距（Spacing）
  - 4px 基准：4 8 12 16 20 24 32 40 48 64
- 圆角与投影
  - Radius：4（默认）/ 8（卡片）/ 12（弹窗）
  - Shadow：Card 0 4 12 rgba(0,0,0,0.08)，Popover 0 8 24 rgba(0,0,0,0.12)
- 图标
  - 线性 2px 描边；大小 16/20/24，与文字基线对齐

## 布局与响应式
- 断点：sm 640 / md 768 / lg 1024 / xl 1280
- TopBar：高度 56，左右内边距 16（≥ lg 为 24）
- 内容最大宽：1200；两侧留白自适应
- 小屏策略：
  - 工具与筛选折叠为 Drawer/溢出菜单；
  - 关键操作按钮始终可达（底部固定操作栏）。

## 基础组件（仅 UI 与状态表现）
- Button：尺寸 S(28)/M(36)/L(40)；主/次/幽灵/危险；含加载/禁用态
- Input/Textarea：聚焦边框主色并投影；错误态红色说明文案；Textarea 自适应高度
- Select/Popover：选中高亮；键盘上下/回车可用；支持搜索（可选）
- Tabs/Segmented：用于视图切换/筛选；滑块位移伴随动效
- Tag/Badge：状态标识（如“收藏”、“草稿”）
- Tooltip：延迟 300ms，最大宽 280，箭头 6px
- Empty/Skeleton：统一骨架动效 1.2s，色带从左至右

## 页面线框与交互（ASCII）

### Chat（主聊天）
```
┌TopBar: Logo | Chat | Stats | Settings | About | Theme ┐
├──────────────────────────────────────────────────────────────────┤
│ Master Selector: [托克维尔 ▼] (下拉选择社会学大师)              │
├──────────────────────────────────────────────────────────────────┤
│ Conversation (scroll, 页面切换后保留)                           │
│  • User bubble (右对齐, 主色浅底)                                │
│  • Assistant bubble (左对齐, 中性色卡片, 显示大师头像)          │
│  • Inline Tools: 复制 | 反馈                                     │
│  • Streaming Visual: 末尾光标闪烁（typing dots）                 │
├──────────────────────────────────────────────────────────────────┤
│ Composer                                                         │
│  [Textarea…]                            (清空) (发送)            │
└──────────────────────────────────────────────────────────────────┘
```
- 气泡最大宽：容器宽的 72%；超长行自动换行
- 代码/引文块：等宽字体、浅底分隔、右上角"复制"图标按钮
- 错误样式：卡片左侧红色条幅 + 错误文案 + 重试按钮（UI 表达）
- 发送键提示：Enter 发送，Shift+Enter 换行（固定提示文案）
- 大师选择器：切换不同社会学大师，对话历史按大师分别保存
```
┌TopBar: Logo | Chat | History | Stats | Settings | Theme | Lang ┐
├──────────────────────────────────────────────────────────────────┤
│ Conversation (scroll)                                            │
│  • User bubble (右对齐, 主色浅底)                                │
│  • Assistant bubble (左对齐, 中性色卡片)                         │
│  • Inline Tools: 复制 | 引用 | 反馈                              │
│  • Streaming Visual: 末尾光标闪烁（typing dots）                 │
├──────────────────────────────────────────────────────────────────┤
│ Composer                                                         │
│  [Textarea…]                 (字数提示)  (清空) (发送)           │
└──────────────────────────────────────────────────────────────────┘
```
- 气泡最大宽：容器宽的 72%；超长行自动换行
- 代码/引文块：等宽字体、浅底分隔、右上角“复制”图标按钮
- 错误样式：卡片左侧红色条幅 + 错误文案 + 重试按钮（UI 表达）
- 发送键提示：Enter 发送，Shift+Enter 换行（固定提示文案）

### History（历史与收藏）
```
┌ Header: 历史 | 搜索框 | 过滤（时间/收藏）                        ┐
├──────────────────────────────────────────────────────────────────┤
│ 左列：会话列表（标题、时间、摘录、收藏星）                       │
│ 右侧：会话预览（前几条消息 + 操作：继续、重命名、删除）          │
└──────────────────────────────────────────────────────────────────┘
```
- 列表项高度 64，悬停轻投影；收藏为金色星标（可切换）
- 空态：插画 + “开始一次新对话”主按钮

### Feedback（评分弹窗）
```
┌ 对最新回答评分───────────────────────────✕ ┐
│ Overall: 1 … 10（刻度或星条）              │
│ 评语（可选，多行）                         │
│                      取消     提交（主）   │
└────────────────────────────────────────────┘
```
- 评分 hover 高亮，选中回弹动效；提交后“感谢反馈”轻提示

### Stats（统计）
- 概要卡片：平均分、总反馈、最近 7 天趋势（火花线）
- 主图：评分分布柱状；hover 显示计数与占比
- 次图：按角色/时间分布（无数据展示空态）

### Settings（偏好）
- 外观：主题（浅/深/系统）
- 开关类控件置右，列表项含副标题解释

### About（关于）
- 简要介绍、使用指引、快捷键、隐私说明链接

## 交互与动效（Micro-interactions）
- 悬停：按钮/卡片边框加深或提升 2dp
- 点击：主按钮 80–120ms 压下态，释放回弹
- 入场：页面 120ms 淡入；列表 20ms/项阶梯式出现
- 切换：Tab/Segmented 滑块位移（200ms，ease-out）
- 提示：右上角轻提示；成功 2.5s，错误 4s

## 可访问性（A11y，UI 表达）
- 控件需有：默认、悬停、按下、聚焦、禁用 5 态
- 焦点环：2px 主色外环，避免布局跳变
- 对比度：正文≥4.5:1，次级文案≥3:1；禁用态仍可辨
- 键盘顺序：TopBar → 主操作 → 弹窗控件；Esc 关闭弹窗

## 文案与空态（示例）
- Chat 输入提示：
  - "选择一位大师，开始对话..."
  - "例如：托克维尔如何看待地方自治？"
- Stats 空态：
  - "暂无统计数据，收集到足够反馈后会在此展示。"
- Master Selector：
  - 托克维尔 (Tocqueville)
  - 更多大师即将加入...

## 主题切换（Light/Dark）
- 使用 CSS 变量；切换 160ms 淡化避免闪烁
- 暗色降低主色饱和以保障文字可读性

## 尺寸摘要（速查）
- Primary 按钮（M）：高 36，水平内边距 16，圆角 8；禁用 48% 不透明度
- 输入：高 40，圆角 8，边框 #E5E7EB；聚焦增加投影 0 0 0 3 rgba(59,130,246,0.15)
- 气泡内边距：上下 10，左右 14；头像 28 圆（可选）

## 交付与落地建议
- 可将本令牌映射为 CSS 变量与主题文件；
- 建议以 Storybook 建立组件基线（Button/Input/Modal/Tooltip 等）；
- 先实现 Chat 页骨架与通用组件，再扩展到 History/Settings。
